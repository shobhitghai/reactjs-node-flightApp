(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
// Define Namespace
(function() {
   window.app = {};
}).call(this);


(function() {
    app.util = function(){
        console.log("hello")
    }
})(app);

var Dropdown = React.createClass({displayName: "Dropdown",
  getInitialState: function() {
  	this.cityList = [];

    return {
      cities : '',
      selectedCity: this.props.data.defaultText
    };
  },

  componentDidMount: function() {
  	var self = this; 
    $.ajax({
    	url: self.props.data.fetchUrl,
    	success: function(data){
    		self.setState({
    			cities: data
    		});
    	}
    });
  },

  citySelectionHandler: function(e){
  	var selectedText = $(e.target).text();
  	this.setState({
  		selectedCity: selectedText
  	});
  },

  render: function() {
  	if(!this.cityList.length){
		for(var i = 0;  i < this.state.cities.length; i++ ){
  			this.cityList.push(React.createElement("li", {key: i, onClick: this.citySelectionHandler}, React.createElement("a", {href: "javascript:void(0)"}, this.state.cities[i])));
	  	}
  	}
  	
    return (
    	React.createElement("div", {className: "dropdown"}, 
            React.createElement("button", {className: "btn btn-default dropdown-toggle", type: "button", id: "dropdownMenu1", "data-toggle": "dropdown"}, 
                this.state.selectedCity, 
                React.createElement("span", {className: "caret"})
            ), 
            React.createElement("ul", {className: "dropdown-menu"}, 
                this.cityList
            )
        )
    );
  }
});

var FilterPanel = React.createClass({displayName: "FilterPanel",
	getInitialState: function(){
		this.filterSelectedProvider = [];

		return null;
	},
	handleProviderSelection: function(e){
		if(e.target.checked){
			this.filterSelectedProvider.push(e.target.value);
		}else{
			this.filterSelectedProvider.splice(this.filterSelectedProvider.indexOf(e.target.value), 1);
		};

		console.log(this.filterSelectedProvider);
	},
	render: function(){
		var flightProviderArr = [];
		var providerChkGroup = [];
		this.filterSelectedProvider = [];

		for (var i = this.props.flightProviders.length - 1; i >= 0; i--) {
			if(flightProviderArr.indexOf(this.props.flightProviders[i]) === -1){
				flightProviderArr.push(this.props.flightProviders[i]);
			}
		};

		for (var i = flightProviderArr.length - 1; i >= 0; i--) {
			providerChkGroup.push(
				React.createElement("div", {key: i, className: "checkbox"}, 
	  				React.createElement("label", null, 
	    				React.createElement("input", {key: i, type: "checkbox", onChange: this.handleProviderSelection, value: flightProviderArr[i]}), 
	    					flightProviderArr[i]
	  					)
				)
			);
		};

		return (
			React.createElement("div", null, 
				providerChkGroup
			)
		)
	}
})


var FlightTable = React.createClass({displayName: "FlightTable",
	render: function(){
		var rows = [];

		for(var i = 0;  i < this.props.data.length; i++ ){
  			rows.push(
  				React.createElement("tr", {key: i}, 
	  				React.createElement("td", null, this.props.data[i].originCity + "-" + this.props.data[i].departureCity), 
					React.createElement("td", null, this.props.data[i].provider + " " + this.props.data[i].flightNumber), 
					React.createElement("td", null, this.props.data[i].duration + " hr"), 
					React.createElement("td", null, this.props.data[i].originTime), 
					React.createElement("td", null, "Rs. " + this.props.data[i].ticketPrice)
				)
  			);
	  	}

		return (
			React.createElement("table", {className: "table table-hover"}, 
				React.createElement("thead", null, 
					React.createElement("tr", null, 
				 		React.createElement("th", null, "From - To"), 
				 		React.createElement("th", null, "Flight Name"), 
				 		React.createElement("th", null, "Duration (hrs)"), 
				 		React.createElement("th", null, "Origin Time"), 
				 		React.createElement("th", null, "Price")

					)
				), 
				React.createElement("tbody", null, 
						rows
				)
			)
		)
	}
})

var FlightData = React.createClass({displayName: "FlightData",
	getInitialState: function(){
		this.data = {};

		return {
			isData: false
		}
	},
  	updateTable: function(data){
  		this.data = data
  	},
	render: function(){
		var flightProviders = [];
		var panel;

		for(var i = 0;  i < this.data.length; i++ ){
			flightProviders.push(this.data[i].provider);
	  	}

		if(this.state.isData){
			panel = (
					React.createElement("div", null, 
						React.createElement(FilterPanel, {flightProviders: flightProviders}), 
						React.createElement(FlightTable, {data: this.data})
					)
			)
		}

		return ( 
			React.createElement("div", null, 
				panel
			)
		)
	}
})


var BookingWindow = React.createClass({displayName: "BookingWindow",
	getInitialState: function(){
		this.originCityOption = {
			fetchUrl: "/getCityList",
			defaultText: "choose origin"
		};

		this.destinationCityOption = {
			fetchUrl: "/getCityList",
			defaultText: "choose destination"
		};

		return null;
	},

	fetchFlight: function(){
		var self = this;
		$.ajax({
    		url: '/getFlightDetails',
    		data: {
    			originCity: this.refs.originDD.state.selectedCity,
    			departureCity: this.refs.destinationDD.state.selectedCity
    		},
    		success: function(data){
	    		var data = $.parseJSON(data);

	    		if(data){
		    		self.refs.flightTable.updateTable(data);
		    		self.refs.flightTable.setState({
	    				isData: true
		    		});
	    		}
	    	}
	    });
	},
	
	render: function(){
		return (
			React.createElement("span", null, 
				React.createElement(Dropdown, {key: "0", ref: "originDD", data: this.originCityOption}), 
				React.createElement(Dropdown, {key: "1", ref: "destinationDD", data: this.destinationCityOption}), 
	            React.createElement("button", {className: "btn btn-primary", onClick: this.fetchFlight, type: "button"}, "Submit"), 
	            React.createElement(FlightData, {ref: "flightTable"})
			)
		)
	}
});

ReactDOM.render(
  React.createElement(BookingWindow, null),
  $('#wrapper')[0]
);

},{}]},{},[1])
//# sourceMappingURL=data:application/json;charset:utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9ncnVudC1icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCIvVXNlcnMvc2hvYmhpdGdoYWkvRGVza3RvcC9jcm9zc2xpbmsvcmVhY3QtZmxpZ2h0YXBwL3B1YmxpYy9qcy9jb21wb25lbnRzL2FwcC5qc3giXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUNBQSxtQkFBbUI7QUFDbkIsQ0FBQyxXQUFXLENBQUM7R0FDVixNQUFNLENBQUMsR0FBRyxHQUFHLEVBQUUsQ0FBQztBQUNuQixDQUFDLEVBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQ2Q7O0FBRUEsQ0FBQyxXQUFXLENBQUM7SUFDVCxHQUFHLENBQUMsSUFBSSxHQUFHLFVBQVUsQ0FBQztRQUNsQixPQUFPLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQztLQUN2QjtBQUNMLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQzs7QUFFUixJQUFJLDhCQUE4Qix3QkFBQTtFQUNoQyxlQUFlLEVBQUUsV0FBVyxDQUFDO0FBQy9CLEdBQUcsSUFBSSxDQUFDLFFBQVEsR0FBRyxFQUFFLENBQUM7O0lBRWxCLE9BQU87TUFDTCxNQUFNLEdBQUcsRUFBRTtNQUNYLFlBQVksRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxXQUFXO0tBQzFDLENBQUM7QUFDTixHQUFHOztFQUVELGlCQUFpQixFQUFFLFdBQVcsQ0FBQztHQUM5QixJQUFJLElBQUksR0FBRyxJQUFJLENBQUM7SUFDZixDQUFDLENBQUMsSUFBSSxDQUFDO0tBQ04sR0FBRyxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLFFBQVE7S0FDN0IsT0FBTyxFQUFFLFNBQVMsSUFBSSxDQUFDLENBQUM7TUFDdkIsSUFBSSxDQUFDLFFBQVEsQ0FBQztPQUNiLE1BQU0sRUFBRSxJQUFJO09BQ1osQ0FBQyxDQUFDO01B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Q0FBQztDQUNqQiIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCIvLyBEZWZpbmUgTmFtZXNwYWNlXG4oZnVuY3Rpb24oKSB7XG4gICB3aW5kb3cuYXBwID0ge307XG59KS5jYWxsKHRoaXMpO1xuXG5cbihmdW5jdGlvbigpIHtcbiAgICBhcHAudXRpbCA9IGZ1bmN0aW9uKCl7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiaGVsbG9cIilcbiAgICB9XG59KShhcHApO1xuXG52YXIgRHJvcGRvd24gPSBSZWFjdC5jcmVhdGVDbGFzcyh7XG4gIGdldEluaXRpYWxTdGF0ZTogZnVuY3Rpb24oKSB7XG4gIFx0dGhpcy5jaXR5TGlzdCA9IFtdO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIGNpdGllcyA6ICcnLFxuICAgICAgc2VsZWN0ZWRDaXR5OiB0aGlzLnByb3BzLmRhdGEuZGVmYXVsdFRleHRcbiAgICB9O1xuICB9LFxuXG4gIGNvbXBvbmVudERpZE1vdW50OiBmdW5jdGlvbigpIHtcbiAgXHR2YXIgc2VsZiA9IHRoaXM7IFxuICAgICQuYWpheCh7XG4gICAgXHR1cmw6IHNlbGYucHJvcHMuZGF0YS5mZXRjaFVybCxcbiAgICBcdHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpe1xuICAgIFx0XHRzZWxmLnNldFN0YXRlKHtcbiAgICBcdFx0XHRjaXRpZXM6IGRhdGFcbiAgICBcdFx0fSk7XG4gICAgXHR9XG4gICAgfSk7XG4gIH0sXG5cbiAgY2l0eVNlbGVjdGlvbkhhbmRsZXI6IGZ1bmN0aW9uKGUpe1xuICBcdHZhciBzZWxlY3RlZFRleHQgPSAkKGUudGFyZ2V0KS50ZXh0KCk7XG4gIFx0dGhpcy5zZXRTdGF0ZSh7XG4gIFx0XHRzZWxlY3RlZENpdHk6IHNlbGVjdGVkVGV4dFxuICBcdH0pO1xuICB9LFxuXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gIFx0aWYoIXRoaXMuY2l0eUxpc3QubGVuZ3RoKXtcblx0XHRmb3IodmFyIGkgPSAwOyAgaSA8IHRoaXMuc3RhdGUuY2l0aWVzLmxlbmd0aDsgaSsrICl7XG4gIFx0XHRcdHRoaXMuY2l0eUxpc3QucHVzaCg8bGkga2V5PXtpfSBvbkNsaWNrPXt0aGlzLmNpdHlTZWxlY3Rpb25IYW5kbGVyfT48YSBocmVmPVwiamF2YXNjcmlwdDp2b2lkKDApXCI+e3RoaXMuc3RhdGUuY2l0aWVzW2ldfTwvYT48L2xpPik7XG5cdCAgXHR9XG4gIFx0fVxuICBcdFxuICAgIHJldHVybiAoXG4gICAgXHQ8ZGl2IGNsYXNzTmFtZT1cImRyb3Bkb3duXCI+XG4gICAgICAgICAgICA8YnV0dG9uIGNsYXNzTmFtZT1cImJ0biBidG4tZGVmYXVsdCBkcm9wZG93bi10b2dnbGVcIiB0eXBlPVwiYnV0dG9uXCIgaWQ9XCJkcm9wZG93bk1lbnUxXCIgZGF0YS10b2dnbGU9XCJkcm9wZG93blwiPlxuICAgICAgICAgICAgICAgIHt0aGlzLnN0YXRlLnNlbGVjdGVkQ2l0eX1cbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJjYXJldFwiPjwvc3Bhbj5cbiAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgPHVsIGNsYXNzTmFtZT1cImRyb3Bkb3duLW1lbnVcIj5cbiAgICAgICAgICAgICAgICB7dGhpcy5jaXR5TGlzdH1cbiAgICAgICAgICAgIDwvdWw+XG4gICAgICAgIDwvZGl2PlxuICAgICk7XG4gIH1cbn0pO1xuXG52YXIgRmlsdGVyUGFuZWwgPSBSZWFjdC5jcmVhdGVDbGFzcyh7XG5cdGdldEluaXRpYWxTdGF0ZTogZnVuY3Rpb24oKXtcblx0XHR0aGlzLmZpbHRlclNlbGVjdGVkUHJvdmlkZXIgPSBbXTtcblxuXHRcdHJldHVybiBudWxsO1xuXHR9LFxuXHRoYW5kbGVQcm92aWRlclNlbGVjdGlvbjogZnVuY3Rpb24oZSl7XG5cdFx0aWYoZS50YXJnZXQuY2hlY2tlZCl7XG5cdFx0XHR0aGlzLmZpbHRlclNlbGVjdGVkUHJvdmlkZXIucHVzaChlLnRhcmdldC52YWx1ZSk7XG5cdFx0fWVsc2V7XG5cdFx0XHR0aGlzLmZpbHRlclNlbGVjdGVkUHJvdmlkZXIuc3BsaWNlKHRoaXMuZmlsdGVyU2VsZWN0ZWRQcm92aWRlci5pbmRleE9mKGUudGFyZ2V0LnZhbHVlKSwgMSk7XG5cdFx0fTtcblxuXHRcdGNvbnNvbGUubG9nKHRoaXMuZmlsdGVyU2VsZWN0ZWRQcm92aWRlcik7XG5cdH0sXG5cdHJlbmRlcjogZnVuY3Rpb24oKXtcblx0XHR2YXIgZmxpZ2h0UHJvdmlkZXJBcnIgPSBbXTtcblx0XHR2YXIgcHJvdmlkZXJDaGtHcm91cCA9IFtdO1xuXHRcdHRoaXMuZmlsdGVyU2VsZWN0ZWRQcm92aWRlciA9IFtdO1xuXG5cdFx0Zm9yICh2YXIgaSA9IHRoaXMucHJvcHMuZmxpZ2h0UHJvdmlkZXJzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG5cdFx0XHRpZihmbGlnaHRQcm92aWRlckFyci5pbmRleE9mKHRoaXMucHJvcHMuZmxpZ2h0UHJvdmlkZXJzW2ldKSA9PT0gLTEpe1xuXHRcdFx0XHRmbGlnaHRQcm92aWRlckFyci5wdXNoKHRoaXMucHJvcHMuZmxpZ2h0UHJvdmlkZXJzW2ldKTtcblx0XHRcdH1cblx0XHR9O1xuXG5cdFx0Zm9yICh2YXIgaSA9IGZsaWdodFByb3ZpZGVyQXJyLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG5cdFx0XHRwcm92aWRlckNoa0dyb3VwLnB1c2goXG5cdFx0XHRcdDxkaXYga2V5PXtpfSBjbGFzc05hbWU9XCJjaGVja2JveFwiPlxuXHQgIFx0XHRcdFx0PGxhYmVsPlxuXHQgICAgXHRcdFx0XHQ8aW5wdXQga2V5PXtpfSB0eXBlPVwiY2hlY2tib3hcIiBvbkNoYW5nZT17dGhpcy5oYW5kbGVQcm92aWRlclNlbGVjdGlvbn0gdmFsdWU9e2ZsaWdodFByb3ZpZGVyQXJyW2ldfS8+XG5cdCAgICBcdFx0XHRcdFx0e2ZsaWdodFByb3ZpZGVyQXJyW2ldfVxuXHQgIFx0XHRcdFx0XHQ8L2xhYmVsPlxuXHRcdFx0XHQ8L2Rpdj5cblx0XHRcdCk7XG5cdFx0fTtcblxuXHRcdHJldHVybiAoXG5cdFx0XHQ8ZGl2PlxuXHRcdFx0XHR7cHJvdmlkZXJDaGtHcm91cH1cblx0XHRcdDwvZGl2PlxuXHRcdClcblx0fVxufSlcblxuXG52YXIgRmxpZ2h0VGFibGUgPSBSZWFjdC5jcmVhdGVDbGFzcyh7XG5cdHJlbmRlcjogZnVuY3Rpb24oKXtcblx0XHR2YXIgcm93cyA9IFtdO1xuXG5cdFx0Zm9yKHZhciBpID0gMDsgIGkgPCB0aGlzLnByb3BzLmRhdGEubGVuZ3RoOyBpKysgKXtcbiAgXHRcdFx0cm93cy5wdXNoKFxuICBcdFx0XHRcdDx0ciBrZXk9e2l9PlxuXHQgIFx0XHRcdFx0PHRkPnt0aGlzLnByb3BzLmRhdGFbaV0ub3JpZ2luQ2l0eSArIFwiLVwiICsgdGhpcy5wcm9wcy5kYXRhW2ldLmRlcGFydHVyZUNpdHl9PC90ZD5cblx0XHRcdFx0XHQ8dGQ+e3RoaXMucHJvcHMuZGF0YVtpXS5wcm92aWRlciArIFwiIFwiICsgdGhpcy5wcm9wcy5kYXRhW2ldLmZsaWdodE51bWJlcn08L3RkPlxuXHRcdFx0XHRcdDx0ZD57dGhpcy5wcm9wcy5kYXRhW2ldLmR1cmF0aW9uICsgXCIgaHJcIn08L3RkPlxuXHRcdFx0XHRcdDx0ZD57dGhpcy5wcm9wcy5kYXRhW2ldLm9yaWdpblRpbWV9PC90ZD5cblx0XHRcdFx0XHQ8dGQ+e1wiUnMuIFwiICsgdGhpcy5wcm9wcy5kYXRhW2ldLnRpY2tldFByaWNlfTwvdGQ+XG5cdFx0XHRcdDwvdHI+XG4gIFx0XHRcdCk7XG5cdCAgXHR9XG5cblx0XHRyZXR1cm4gKFxuXHRcdFx0PHRhYmxlIGNsYXNzTmFtZT1cInRhYmxlIHRhYmxlLWhvdmVyXCI+XG5cdFx0XHRcdDx0aGVhZD5cblx0XHRcdFx0XHQ8dHI+XG5cdFx0XHRcdCBcdFx0PHRoPkZyb20gLSBUbzwvdGg+XG5cdFx0XHRcdCBcdFx0PHRoPkZsaWdodCBOYW1lPC90aD5cblx0XHRcdFx0IFx0XHQ8dGg+RHVyYXRpb24gKGhycyk8L3RoPlxuXHRcdFx0XHQgXHRcdDx0aD5PcmlnaW4gVGltZTwvdGg+XG5cdFx0XHRcdCBcdFx0PHRoPlByaWNlPC90aD5cblxuXHRcdFx0XHRcdDwvdHI+XG5cdFx0XHRcdDwvdGhlYWQ+XG5cdFx0XHRcdDx0Ym9keT5cblx0XHRcdFx0XHRcdHtyb3dzfVxuXHRcdFx0XHQ8L3Rib2R5PlxuXHRcdFx0PC90YWJsZT5cblx0XHQpXG5cdH1cbn0pXG5cbnZhciBGbGlnaHREYXRhID0gUmVhY3QuY3JlYXRlQ2xhc3Moe1xuXHRnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uKCl7XG5cdFx0dGhpcy5kYXRhID0ge307XG5cblx0XHRyZXR1cm4ge1xuXHRcdFx0aXNEYXRhOiBmYWxzZVxuXHRcdH1cblx0fSxcbiAgXHR1cGRhdGVUYWJsZTogZnVuY3Rpb24oZGF0YSl7XG4gIFx0XHR0aGlzLmRhdGEgPSBkYXRhXG4gIFx0fSxcblx0cmVuZGVyOiBmdW5jdGlvbigpe1xuXHRcdHZhciBmbGlnaHRQcm92aWRlcnMgPSBbXTtcblx0XHR2YXIgcGFuZWw7XG5cblx0XHRmb3IodmFyIGkgPSAwOyAgaSA8IHRoaXMuZGF0YS5sZW5ndGg7IGkrKyApe1xuXHRcdFx0ZmxpZ2h0UHJvdmlkZXJzLnB1c2godGhpcy5kYXRhW2ldLnByb3ZpZGVyKTtcblx0ICBcdH1cblxuXHRcdGlmKHRoaXMuc3RhdGUuaXNEYXRhKXtcblx0XHRcdHBhbmVsID0gKFxuXHRcdFx0XHRcdDxkaXY+XG5cdFx0XHRcdFx0XHQ8RmlsdGVyUGFuZWwgZmxpZ2h0UHJvdmlkZXJzPXtmbGlnaHRQcm92aWRlcnN9Lz5cblx0XHRcdFx0XHRcdDxGbGlnaHRUYWJsZSBkYXRhPXt0aGlzLmRhdGF9IC8+XG5cdFx0XHRcdFx0PC9kaXY+XG5cdFx0XHQpXG5cdFx0fVxuXG5cdFx0cmV0dXJuICggXG5cdFx0XHQ8ZGl2PlxuXHRcdFx0XHR7cGFuZWx9XG5cdFx0XHQ8L2Rpdj5cblx0XHQpXG5cdH1cbn0pXG5cblxudmFyIEJvb2tpbmdXaW5kb3cgPSBSZWFjdC5jcmVhdGVDbGFzcyh7XG5cdGdldEluaXRpYWxTdGF0ZTogZnVuY3Rpb24oKXtcblx0XHR0aGlzLm9yaWdpbkNpdHlPcHRpb24gPSB7XG5cdFx0XHRmZXRjaFVybDogXCIvZ2V0Q2l0eUxpc3RcIixcblx0XHRcdGRlZmF1bHRUZXh0OiBcImNob29zZSBvcmlnaW5cIlxuXHRcdH07XG5cblx0XHR0aGlzLmRlc3RpbmF0aW9uQ2l0eU9wdGlvbiA9IHtcblx0XHRcdGZldGNoVXJsOiBcIi9nZXRDaXR5TGlzdFwiLFxuXHRcdFx0ZGVmYXVsdFRleHQ6IFwiY2hvb3NlIGRlc3RpbmF0aW9uXCJcblx0XHR9O1xuXG5cdFx0cmV0dXJuIG51bGw7XG5cdH0sXG5cblx0ZmV0Y2hGbGlnaHQ6IGZ1bmN0aW9uKCl7XG5cdFx0dmFyIHNlbGYgPSB0aGlzO1xuXHRcdCQuYWpheCh7XG4gICAgXHRcdHVybDogJy9nZXRGbGlnaHREZXRhaWxzJyxcbiAgICBcdFx0ZGF0YToge1xuICAgIFx0XHRcdG9yaWdpbkNpdHk6IHRoaXMucmVmcy5vcmlnaW5ERC5zdGF0ZS5zZWxlY3RlZENpdHksXG4gICAgXHRcdFx0ZGVwYXJ0dXJlQ2l0eTogdGhpcy5yZWZzLmRlc3RpbmF0aW9uREQuc3RhdGUuc2VsZWN0ZWRDaXR5XG4gICAgXHRcdH0sXG4gICAgXHRcdHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpe1xuXHQgICAgXHRcdHZhciBkYXRhID0gJC5wYXJzZUpTT04oZGF0YSk7XG5cblx0ICAgIFx0XHRpZihkYXRhKXtcblx0XHQgICAgXHRcdHNlbGYucmVmcy5mbGlnaHRUYWJsZS51cGRhdGVUYWJsZShkYXRhKTtcblx0XHQgICAgXHRcdHNlbGYucmVmcy5mbGlnaHRUYWJsZS5zZXRTdGF0ZSh7XG5cdCAgICBcdFx0XHRcdGlzRGF0YTogdHJ1ZVxuXHRcdCAgICBcdFx0fSk7XG5cdCAgICBcdFx0fVxuXHQgICAgXHR9XG5cdCAgICB9KTtcblx0fSxcblx0XG5cdHJlbmRlcjogZnVuY3Rpb24oKXtcblx0XHRyZXR1cm4gKFxuXHRcdFx0PHNwYW4+XG5cdFx0XHRcdDxEcm9wZG93biBrZXk9XCIwXCIgcmVmPVwib3JpZ2luRERcIiBkYXRhPXt0aGlzLm9yaWdpbkNpdHlPcHRpb259Lz5cblx0XHRcdFx0PERyb3Bkb3duIGtleT1cIjFcIiByZWY9XCJkZXN0aW5hdGlvbkREXCIgZGF0YT17dGhpcy5kZXN0aW5hdGlvbkNpdHlPcHRpb259Lz5cblx0ICAgICAgICAgICAgPGJ1dHRvbiBjbGFzc05hbWU9XCJidG4gYnRuLXByaW1hcnlcIiBvbkNsaWNrPXt0aGlzLmZldGNoRmxpZ2h0fSB0eXBlPVwiYnV0dG9uXCI+U3VibWl0PC9idXR0b24+XG5cdCAgICAgICAgICAgIDxGbGlnaHREYXRhIHJlZj1cImZsaWdodFRhYmxlXCIvPlxuXHRcdFx0PC9zcGFuPlxuXHRcdClcblx0fVxufSk7XG5cblJlYWN0RE9NLnJlbmRlcihcbiAgPEJvb2tpbmdXaW5kb3cvPixcbiAgJCgnI3dyYXBwZXInKVswXVxuKTsiXX0=
