/*! Template 1.0.0 Shobhit Ghai 2015-12-21 */
!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){(function(){window.app={}}).call(this),function(){app.util=function(){console.log("hello")}}(app);var d=React.createClass({displayName:"Dropdown",getInitialState:function(){return this.cityList=[],{cities:"",selectedCity:this.props.data.defaultText}},componentDidMount:function(){var a=this;$.ajax({url:a.props.data.fetchUrl,success:function(b){a.setState({cities:b})}})},citySelectionHandler:function(a){var b=$(a.target).text();this.setState({selectedCity:b})},render:function(){if(!this.cityList.length)for(var a=0;a<this.state.cities.length;a++)this.cityList.push(React.createElement("li",{key:a,onClick:this.citySelectionHandler},React.createElement("a",{href:"javascript:void(0)"},this.state.cities[a])));return React.createElement("div",{className:"dropdown"},React.createElement("button",{className:"btn btn-default dropdown-toggle",type:"button",id:"dropdownMenu1","data-toggle":"dropdown"},this.state.selectedCity,React.createElement("span",{className:"caret"})),React.createElement("ul",{className:"dropdown-menu"},this.cityList))}}),e=React.createClass({displayName:"ProviderChkBox",getInitialState:function(){return{checked:!1}},checkBoxSelection:function(a){this.props.updateFilter(a),this.setState({checked:!this.state.checked})},componentWillReceiveProps:function(){this.setState({checked:!1})},render:function(){return React.createElement("input",{type:"checkbox",checked:this.state.checked?"checked":null,onChange:this.checkBoxSelection,value:this.props.value})}}),f=React.createClass({displayName:"FilterPanel",getInitialState:function(){return this.filterSelectedProvider=[],this.flightProviderArr=[],null},handleFilterPanelSelection:function(a){if(a.target.checked)this.filterSelectedProvider.push(a.target.value);else if(this.filterSelectedProvider.splice(this.filterSelectedProvider.indexOf(a.target.value),1),!this.filterSelectedProvider.length)return this.filterSelectedProvider=this.flightProviderArr,this.props.filterHandler({provider:this.filterSelectedProvider}),this.filterSelectedProvider=[],!1;this.props.filterHandler({provider:this.filterSelectedProvider}),console.log(this.filterSelectedProvider)},render:function(){this.flightProviderArr=[];var a=[];this.filterSelectedProvider=[];for(var b=this.props.flightProviders.length-1;b>=0;b--)-1===this.flightProviderArr.indexOf(this.props.flightProviders[b])&&this.flightProviderArr.push(this.props.flightProviders[b]);for(var b=this.flightProviderArr.length-1;b>=0;b--)a.push(React.createElement("div",{key:b,className:"checkbox filter-checkbox"},React.createElement("label",null,React.createElement(e,{key:b,value:this.flightProviderArr[b],updateFilter:this.handleFilterPanelSelection}),this.flightProviderArr[b])));return React.createElement("div",{className:"col-md-12"},React.createElement("button",{className:"btn btn-sm btn-default filter-panel-btn",type:"button","data-toggle":"collapse","data-target":"#filterFlight"},"Filter flights"),React.createElement("div",{className:"collapse",id:"filterFlight"},React.createElement("div",{className:"well"},a)))}}),g=React.createClass({displayName:"FlightTable",getInitialState:function(){return{refreshTable:!1}},updateTable:function(a){this.updatedData=a},render:function(){var a=[];this.updatedData?this.data=this.updatedData:this.data=this.props.data;for(var b=0;b<this.data.length;b++)a.push(React.createElement("tr",{key:b},React.createElement("td",null,this.data[b].originCity+"-"+this.data[b].departureCity),React.createElement("td",null,this.data[b].provider+" "+this.data[b].flightNumber),React.createElement("td",null,this.data[b].duration+" hr"),React.createElement("td",null,this.data[b].originTime),React.createElement("td",null,"Rs. "+this.data[b].ticketPrice)));return this.updatedData=null,React.createElement("table",{className:"table table-hover"},React.createElement("thead",null,React.createElement("tr",null,React.createElement("th",null,"From - To"),React.createElement("th",null,"Flight Name"),React.createElement("th",null,"Duration (hrs)"),React.createElement("th",null,"Origin Time"),React.createElement("th",null,"Price"))),React.createElement("tbody",null,a))}}),h=React.createClass({displayName:"FlightData",getInitialState:function(){return this.data={},{isData:!1}},updateData:function(a){this.data=a},filterTable:function(a){console.log(a);var b=this.data.filter(function(b){return-1!==a.provider.indexOf(b.provider)});this.refs.table.updateTable(b),this.refs.table.setState({refreshTable:!0})},render:function(){for(var a,b=[],c=0;c<this.data.length;c++)b.push(this.data[c].provider);return this.state.isData&&(a=React.createElement("div",{className:"col-md-12"},React.createElement("div",{className:"page-header"},React.createElement("h3",null,"Flights available")),React.createElement(f,{ref:"panel",flightProviders:b,filterHandler:this.filterTable}),React.createElement("div",{className:"col-md-12"},React.createElement(g,{ref:"table",data:this.data})))),React.createElement("div",null,a)}}),i=React.createClass({displayName:"BookingWindow",getInitialState:function(){return this.originCityOption={fetchUrl:"/getCityList",defaultText:"choose origin"},this.destinationCityOption={fetchUrl:"/getCityList",defaultText:"choose destination"},null},fetchFlight:function(){var a=this;$.ajax({url:"/getFlightDetails",data:{originCity:this.refs.originDD.state.selectedCity,departureCity:this.refs.destinationDD.state.selectedCity},success:function(b){var b=$.parseJSON(b);b&&(a.refs.flightData.updateData(b),a.refs.flightData.setState({isData:!0}))}})},render:function(){return React.createElement("span",null,React.createElement("div",{className:"btn-group col-md-8 selection-panel"},React.createElement(d,{key:"0",ref:"originDD",data:this.originCityOption}),React.createElement(d,{key:"1",ref:"destinationDD",data:this.destinationCityOption}),React.createElement("div",{className:"col-md-3"},React.createElement("button",{className:"btn btn-primary",onClick:this.fetchFlight,type:"button"},"Search"))),React.createElement(h,{ref:"flightData"}))}});ReactDOM.render(React.createElement(i,null),$("#wrapper")[0])},{}]},{},[1]);